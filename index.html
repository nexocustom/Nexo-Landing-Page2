<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nexo Custom Interior — 工作日志</title>
  <meta name="description" content="Nexo Custom Interior 员工工作日志入口：阿恒中午与晚上两次填写 Google 表单。" />
  <style>
    /* Header layout */
.brand-left{display:flex;align-items:center;gap:20px;padding:8px 0;}
.brand-logo{height:160px;width:auto;display:block;filter:drop-shadow(0 8px 24px rgba(255,107,53,.22));}

.titleblock h1{
  font-size:2rem;       /* 主标题更大 */
  margin:0;
  line-height:1.2;
}
.titleblock small{
  display:block;
  font-size:1.1rem;     /* 副标题略大 */
  color:var(--muted);
  font-weight:500;
  margin-top:4px;
}

/* 导航字体和间距 */
.nav a{
  margin-left:24px;
  font-size:1.05rem;
  font-weight:700;
  color:#ffd3c3;
  text-decoration:none;
}

    :root{
      --bg:#0f172a; --card:#111827; --muted:#94a3b8; --text:#e5e7eb;
      --brand:#ff6b35; --ok:#22c55e; --warn:#fbbf24; --err:#ef4444; --ring: rgba(255,107,53,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans SC","PingFang SC",Arial,sans-serif;background:radial-gradient(1200px 800px at 70% -10%, #1f2937 0%, var(--bg) 60%);color:var(--text);display:flex;flex-direction:column;min-height:100vh}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(15,23,42,.95),rgba(15,23,42,.75));backdrop-filter:blur(6px);border-bottom:1px solid #1f2937}
    .wrap{max-width:1000px;margin:0 auto;padding:16px 20px}
    .brand{display:flex;align-items:center;gap:12px;justify-content:space-between;flex-wrap:wrap}
    .logo{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;background:conic-gradient(from 180deg,#ffedd5,#fecaca,#fde68a,#ffedd5);color:#111;font-weight:900;letter-spacing:.5px;box-shadow:0 8px 24px rgba(255,107,53,.2)}
    .brand h1{font-size:1.15rem;margin:0}
    .brand small{display:block;color:var(--muted);font-weight:500}
    .nav a{margin-left:16px;color:#ffd3c3;text-decoration:none;font-weight:700}
    .hero{padding:32px 20px 12px}
    .hero .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media(max-width:800px){.hero .grid{grid-template-columns:1fr}}
    .badge{display:inline-flex;align-items:center;gap:.5rem;padding:8px 12px;border-radius:999px;font-weight:700;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .highlight{font-size:clamp(24px,4vw,38px);line-height:1.2;margin:10px 0 0;font-weight:800;background:linear-gradient(90deg,#fff 0%,#ffe1d6 40%,#ffd0c2 60%,#fff 100%);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 1px 0 rgba(255,255,255,.05)}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .card h3{margin:0 0 6px}
    .muted{color:var(--muted)}
    .tiles{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:14px}
    @media(max-width:700px){.tiles{grid-template-columns:1fr}}
    .tile .top{display:flex;align-items:center;gap:10px;justify-content:space-between}
    .when{font-size:.9rem;color:var(--muted)}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{appearance:none;border:none;cursor:pointer;font-weight:700;padding:12px 16px;border-radius:12px;color:#111;background:#fff;box-shadow:0 8px 20px rgba(255,255,255,.08);outline:2px solid transparent;outline-offset:2px;transition:.2s ease}
    .btn:focus{outline-color:var(--ring)}
    .btn.brand{background:linear-gradient(180deg,#ffd3c3,#ffbd9d);color:#111}
    .btn.ghost{background:transparent;color:var(--text);border:1px dashed rgba(255,255,255,.25)}
    .btn.done{background:linear-gradient(180deg,#c7f9cc,#86efac);color:#064e3b}
    .status{display:flex;align-items:center;gap:8px;margin-top:10px}
    .dot{width:10px;height:10px;border-radius:999px;box-shadow:0 0 0 3px rgba(0,0,0,.15) inset}
    .dot.ok{background:var(--ok)}.dot.warn{background:var(--warn)}.dot.err{background:var(--err)}
    footer{margin-top:auto;opacity:.9}
    footer .wrap{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    footer small{color:var(--muted)}
    .kbar{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:12px}
    .kbar kbd{background:#0b1222;border:1px solid rgba(255,255,255,.15);padding:6px 10px;border-radius:8px;color:#cbd5e1}
    .clock{font-variant-numeric:tabular-nums}
  </style>
</head>
<body>
  <header>
    <div class="wrap brand">
      <div style="display:flex;align-items:center;gap:12px">
        <a href="index.html" style="display:flex;align-items:center;gap:12px;text-decoration:none">
  <img src="assets/branding/nexo-logo-original.png" alt="Nexo Custom Interior"
       style="height: 160px;width:auto;display:block;filter:drop-shadow(0 8px 24px rgba(255,107,53,.2));">
</a>
        <div>
          <h1>Nexo Custom Interior <small>— Seattle</small></h1>
          <small>高端室内翻新 · 品质至上</small>
        </div>
      </div>
      <nav class="nav">
        <a href="standards.html">施工标准</a>
      </nav>
    </div>
  </header>
  <section class="wrap hero">
    <div class="grid">
      <div class="card">
        <span class="badge">🐷 🐷 🐷</span>
        <h2 class="highlight">一群猪在西雅图搞装修</h2>
        <p class="muted">A bunch of piggies doing remodel work in the Seattle area — and doing it well.</p>
        <div class="kbar">
          <kbd>Hi, 阿恒 👋</kbd>
          <kbd>每天填写 2 次：中/晚</kbd>
          <kbd class="clock" id="clock">--:--</kbd>
        </div>
      </div>
      <div class="card">
        <h3>使用说明</h3>
        <ol class="muted">
          <li>点击按钮跳转到 Google 表单进行填写。</li>
          <li>提交后回到本页，点击“标记完成”。</li>
          <li>系统会在每天 00:00 自动重置今日状态。</li>
        </ol>
      </div>
    </div>
    <div class="tiles">
      <div class="card tile" id="tile-weekly">
  <div class="top">
    <div>
      <h3>周一周报</h3>
      <div class="when">建议时间：每周一</div>
    </div>
    <div class="status">
      <span class="dot warn" id="dot-weekly"></span>
      <span id="state-weekly">本周未完成</span>
    </div>
  </div>
  <div class="btnrow">
    <a class="btn brand"
       href="https://docs.google.com/forms/d/e/1FAIpQLSfrQKN4qx-M6usktqd_NlsYXnmA6ZX4YSNEzyxiwDS--GBIQQ/viewform?usp=header"
       target="_blank">打开表单</a>
    <button class="btn ghost" id="mark-weekly">标记完成</button>
  </div>
  <div class="muted" id="time-weekly"></div>
</div>
      <div class="card tile" id="tile-morning">
        <div class="top">
          <div>
            <h3>中午日志</h3>
            <div class="when">建议时间：11:30 — 13:30</div>
          </div>
          <div class="status"><span class="dot warn" id="dot-morning"></span><span id="state-morning">今日未完成</span></div>
        </div>
        <div class="btnrow">
          <a class="btn brand" href="https://docs.google.com/forms/d/e/1FAIpQLSfVvb7ZxaSVKEXi5evcbJjSInKRGi3KvkUa7x-eVsY1UDX4aA/viewform?usp=header" target="_blank">打开表单</a>
          <button class="btn ghost" id="mark-morning">标记完成</button>
        </div>
        <div class="muted" id="time-morning"></div>
      </div>
      <div class="card tile" id="tile-evening">
        <div class="top">
          <div>
            <h3>晚班日志</h3>
            <div class="when">建议时间：17:00 — 21:00</div>
          </div>
          <div class="status"><span class="dot warn" id="dot-evening"></span><span id="state-evening">今日未完成</span></div>
        </div>
        <div class="btnrow">
          <a class="btn brand" href="https://docs.google.com/forms/d/1WmPeD936oUCeNvHnlOWLoGrZ3CFR41jmgoIKucpjAJo/viewform?usp=header" target="_blank">打开表单</a>
          <button class="btn ghost" id="mark-evening">标记完成</button>
        </div>
        <div class="muted" id="time-evening"></div>
      </div>
    </div>
  </section>
  <footer>
    <div class="wrap">
      <small>© <span id="year"></span> Nexo Custom Interior. All rights reserved.</small>
      <small>Seattle, WA · (206) 681-0020 · contact@nexoci.com</small>
    </div>
  </footer>
  <script>
    <script>
  // 便捷选择器
  const $ = (s) => document.querySelector(s);

  // ====== 每日键（中/晚） ======
  const todayKey = () => new Date().toISOString().slice(0,10);
  const k = (slot) => `log:${todayKey()}:${slot}`;

  // ====== 每周键（周一周报）—— ISO 周：周一为一周开始 ======
  function isoWeekKey(date = new Date()){
    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
    const day = d.getUTCDay() || 7;        // 周一=1 ... 周日=7
    d.setUTCDate(d.getUTCDate() + 4 - day);// 移动到本周周四，避免边界问题
    const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
    const week = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
    const yr = d.getUTCFullYear();
    return `${yr}-W${String(week).padStart(2,'0')}`;
  }
  const kWeekly = () => `logw:${isoWeekKey()}:weekly`;

  // ====== 标记逻辑（通用） ======
  function mark(slot){
    const now = new Date();
    const stamp = now.toLocaleString();
    localStorage.setItem(k(slot), stamp);
    render();
  }
  function markWeekly(){
    const now = new Date();
    const stamp = now.toLocaleString();
    localStorage.setItem(kWeekly(), stamp);
    render();
  }

  function isDone(slot){ return !!localStorage.getItem(k(slot)); }
  function isWeeklyDone(){ return !!localStorage.getItem(kWeekly()); }

  // ====== 重置（每日 & 每周） ======
  function resetIfNewDay(){
    const last = localStorage.getItem('log:lastDay');
    const t = todayKey();
    if(last !== t){
      // 清理旧的“日”记录
      Object.keys(localStorage).forEach(key=>{
        if(key.startsWith('log:') && !key.includes(t)) localStorage.removeItem(key);
      });
      localStorage.setItem('log:lastDay', t);
    }
  }
  function resetIfNewWeek(){
    const last = localStorage.getItem('logw:lastWeek');
    const wk = isoWeekKey();
    if(last !== wk){
      // 清理旧的“周”记录
      Object.keys(localStorage).forEach(key=>{
        if(key.startsWith('logw:') && !key.includes(wk)) localStorage.removeItem(key);
      });
      localStorage.setItem('logw:lastWeek', wk);
    }
  }

  // ====== UI 状态渲染 ======
  function setState(slot, done){
    const dot  = $(`#dot-${slot}`);
    const label= $(`#state-${slot}`);
    const time = $(`#time-${slot}`);
    const stamp= localStorage.getItem(k(slot));
    if(done){
      dot.classList.remove('warn','err');
      dot.classList.add('ok');
      label.textContent = '今日已完成';
      time.textContent = stamp ? `完成时间：${stamp}` : '';
    }else{
      dot.classList.remove('ok','err');
      dot.classList.add('warn');
      label.textContent = '今日未完成';
      time.textContent = '';
    }
  }

  function setWeeklyState(done){
    const dot  = $('#dot-weekly');
    const label= $('#state-weekly');
    const time = $('#time-weekly');
    const stamp= localStorage.getItem(kWeekly());
    if(!dot || !label) return; // 如果你还没插入周报卡片，安全退出
    if(done){
      dot.classList.remove('warn','err');
      dot.classList.add('ok');
      label.textContent = '本周已完成';
      time.textContent = stamp ? `完成时间：${stamp}` : '';
    }else{
      dot.classList.remove('ok','err');
      dot.classList.add('warn');
      label.textContent = '本周未完成';
      time.textContent = '';
    }
  }

  function render(){
    setState('morning', isDone('morning'));
    setState('evening', isDone('evening'));
    setWeeklyState(isWeeklyDone());
  }

  // ====== 时钟 ======
  function tick(){
    const now = new Date();
    const el = $('#clock');
    if(el) el.textContent = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
  }

  // ====== 启动 ======
  document.addEventListener('DOMContentLoaded', ()=>{
    const y = $('#year'); if(y) y.textContent = new Date().getFullYear();

    resetIfNewDay();
    resetIfNewWeek();

    render();
    tick();
    setInterval(tick, 1000);

    // 事件绑定（若元素存在）
    const mm = $('#mark-morning'); if(mm) mm.addEventListener('click', ()=>mark('morning'));
    const me = $('#mark-evening'); if(me) me.addEventListener('click', ()=>mark('evening'));
    const mw = $('#mark-weekly');  if(mw) mw.addEventListener('click', markWeekly);
  });
</script>

  </script>
</body>
</html>
